import classnames from "classnames";

import "./progress.scss";

const UsulanProgress = ({ data }) => {
  let currentStep = "";
  const steps = [
    {
      id: "verifikasi-admin",
      title: "Verifikasi Admin",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" fill="none">
          <path
            fill="currentColor"
            d="M22.618 19.48a5.472 5.472 0 0 0-2.083-7.051V9.063a.411.411 0 0 0-.038-.173l-.02-.036a.424.424 0 0 0-.05-.067c-.003-.004-.005-.01-.01-.013L15.924 4.28c-.002-.002-.004-.002-.006-.005a.417.417 0 0 0-.081-.06l-.024-.011a.41.41 0 0 0-.182-.045H6.456A1.818 1.818 0 0 0 4.64 5.977v18.28a1.818 1.818 0 0 0 1.816 1.817H18.72a1.818 1.818 0 0 0 1.816-1.816v-1.701l2.867 2.865a1.813 1.813 0 0 0 1.29.535h.003a1.823 1.823 0 0 0 1.287-3.114l-3.364-3.364ZM16.044 5.561l3.091 3.091H17.04a.997.997 0 0 1-.996-.996V5.562Zm3.67 18.696a.997.997 0 0 1-.995.996H6.456a.997.997 0 0 1-.996-.996V5.977a.997.997 0 0 1 .996-.997h8.768v2.677a1.818 1.818 0 0 0 1.816 1.817h2.675v2.544a5.484 5.484 0 1 0 0 10.185v2.055Zm.22-3.063-.012.006a4.671 4.671 0 1 1-2.244-8.758 4.664 4.664 0 0 1 4.082 6.92 4.675 4.675 0 0 1-1.826 1.831v.001Zm5.467 3.649a.995.995 0 0 1-1.092.218 1 1 0 0 1-.326-.219l-3.21-3.208a5.326 5.326 0 0 0 1.42-1.42l3.208 3.208a1.001 1.001 0 0 1 0 1.42Z"
          />
          <path
            fill="currentColor"
            d="M13.25 11.002H8.078a.41.41 0 1 0 0 .82h5.173a.41.41 0 1 0 0-.82h-.001ZM10.489 14.59h-2.41a.41.41 0 0 0 0 .82h2.41a.41.41 0 0 0 0-.82ZM12.589 7.414h-4.51a.41.41 0 1 0 0 .82h4.51a.41.41 0 1 0 0-.82ZM10.489 18.178h-2.41a.41.41 0 1 0 0 .82h2.41a.41.41 0 0 0 0-.82ZM12.589 21.766h-4.51a.41.41 0 1 0 0 .82h4.51a.41.41 0 1 0 0-.82ZM19.422 15.613l-2.241 2.24-1.266-1.265a.41.41 0 0 0-.58.58l1.556 1.555a.41.41 0 0 0 .58 0l2.531-2.531a.41.41 0 0 0-.58-.58Z"
          />
        </svg>
      ),
    },
    {
      id: "verifikasi-teknis",
      title:
        data.DirektoratId === 4 ? "Verifikasi Lokasi" : "Verifikasi Teknis",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" fill="none">
          <path
            fill="currentColor"
            d="M22.618 19.48a5.472 5.472 0 0 0-2.083-7.051V9.063a.411.411 0 0 0-.038-.173l-.02-.036a.424.424 0 0 0-.05-.067c-.003-.004-.005-.01-.01-.013L15.924 4.28c-.002-.002-.004-.002-.006-.005a.417.417 0 0 0-.081-.06l-.024-.011a.41.41 0 0 0-.182-.045H6.456A1.818 1.818 0 0 0 4.64 5.977v18.28a1.818 1.818 0 0 0 1.816 1.817H18.72a1.818 1.818 0 0 0 1.816-1.816v-1.701l2.867 2.865a1.813 1.813 0 0 0 1.29.535h.003a1.823 1.823 0 0 0 1.287-3.114l-3.364-3.364ZM16.044 5.561l3.091 3.091H17.04a.997.997 0 0 1-.996-.996V5.562Zm3.67 18.696a.997.997 0 0 1-.995.996H6.456a.997.997 0 0 1-.996-.996V5.977a.997.997 0 0 1 .996-.997h8.768v2.677a1.818 1.818 0 0 0 1.816 1.817h2.675v2.544a5.484 5.484 0 1 0 0 10.185v2.055Zm.22-3.063-.012.006a4.671 4.671 0 1 1-2.244-8.758 4.664 4.664 0 0 1 4.082 6.92 4.675 4.675 0 0 1-1.826 1.831v.001Zm5.467 3.649a.995.995 0 0 1-1.092.218 1 1 0 0 1-.326-.219l-3.21-3.208a5.326 5.326 0 0 0 1.42-1.42l3.208 3.208a1.001 1.001 0 0 1 0 1.42Z"
          />
          <path
            fill="currentColor"
            d="M13.25 11.002H8.078a.41.41 0 1 0 0 .82h5.173a.41.41 0 1 0 0-.82h-.001ZM10.489 14.59h-2.41a.41.41 0 0 0 0 .82h2.41a.41.41 0 0 0 0-.82ZM12.589 7.414h-4.51a.41.41 0 1 0 0 .82h4.51a.41.41 0 1 0 0-.82ZM10.489 18.178h-2.41a.41.41 0 1 0 0 .82h2.41a.41.41 0 0 0 0-.82ZM12.589 21.766h-4.51a.41.41 0 1 0 0 .82h4.51a.41.41 0 1 0 0-.82ZM19.422 15.613l-2.241 2.24-1.266-1.265a.41.41 0 0 0-.58.58l1.556 1.555a.41.41 0 0 0 .58 0l2.531-2.531a.41.41 0 0 0-.58-.58Z"
          />
        </svg>
      ),
    },
    {
      id: "penetapan",
      title: "Penetapan",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" fill="none">
          <path
            fill="currentColor"
            d="M22.427 19.39h-1.575v-1.418a1.32 1.32 0 0 0-1.32-1.319h-1.128a7.247 7.247 0 0 1 1.393-3.966 5.22 5.22 0 0 0 1.055-3.16v-.21a5.273 5.273 0 0 0-5.466-5.27c-2.801.1-5.081 2.515-5.081 5.386v.094a5.22 5.22 0 0 0 1.055 3.16 7.247 7.247 0 0 1 1.393 3.966h-1.13a1.32 1.32 0 0 0-1.318 1.32v1.417H8.73a2.916 2.916 0 0 0-2.913 2.912v.71a.41.41 0 0 0 .41.41h1.249v1.25a1.286 1.286 0 0 0 1.285 1.285h13.634a1.287 1.287 0 0 0 1.286-1.285v-1.25h1.249a.41.41 0 0 0 .41-.41v-.71a2.916 2.916 0 0 0-2.913-2.912Zm-10.411-7.196a4.406 4.406 0 0 1-.89-2.668v-.093c0-2.435 1.924-4.483 4.29-4.567a4.453 4.453 0 0 1 4.616 4.45v.21c.002.963-.31 1.9-.891 2.668a8.08 8.08 0 0 0-1.564 4.46h-3.999a8.077 8.077 0 0 0-1.562-4.46Zm-.89 5.778a.5.5 0 0 1 .498-.498h7.91a.5.5 0 0 1 .498.498v1.418h-8.907v-1.418Zm11.734 6.7a.466.466 0 0 1-.465.465H8.761a.466.466 0 0 1-.465-.465v-1.25H22.86v1.25Zm1.66-2.07H6.635v-.3A2.095 2.095 0 0 1 8.73 20.21h13.698a2.095 2.095 0 0 1 2.092 2.092v.3Z"
          />
        </svg>
      ),
    },
    {
      id: "pelaksanaan-pembangunan",
      title: "Pelaksanaan Pembangunan",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" fill="none">
          <path
            fill="currentColor"
            d="M26.125 7.035H7.785V5.029a.41.41 0 0 0-.41-.412 2.83 2.83 0 0 0-2.827 2.827v15.112a2.829 2.829 0 0 0 2.827 2.827h18.75a.41.41 0 0 0 .41-.41V7.445a.409.409 0 0 0-.41-.41Zm-20.756.41A2.01 2.01 0 0 1 6.965 5.48v14.28a2.819 2.819 0 0 0-1.596.807V7.445ZM25.715 24.56H7.375a2.005 2.005 0 1 1 0-4.01.41.41 0 0 0 .41-.41V7.855h17.93v16.706Z"
          />
          <path
            fill="currentColor"
            d="M22.355 10.347H11.452a.409.409 0 0 0-.41.41v7.562a.41.41 0 1 0 .82 0v-3.542h3.2a.41.41 0 0 0 .41-.41v-3.2h1.02v3.626a.41.41 0 0 0 .41.41h.387a.41.41 0 0 0 .025-.82v-3.216h4.631v3.216H19.63a.41.41 0 0 0 0 .82h2.316v1.628h-6.9a.41.41 0 0 0-.41.41v.78a.41.41 0 1 0 .82 0v-.37h6.49v3.599h-6.49v-1.184a.41.41 0 1 0-.82 0v1.184h-2.773v-.478a.41.41 0 1 0-.82 0v.888a.409.409 0 0 0 .41.41h10.903a.41.41 0 0 0 .41-.41V10.758a.412.412 0 0 0-.41-.411Zm-7.704 3.61h-2.789v-2.79h2.79v2.79Z"
          />
        </svg>
      ),
    },
    {
      id: "serah-terima",
      title: "Serah Terima",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" fill="none">
          <path
            fill="currentColor"
            d="m11.313 14.813-3.094 3.093-.446-.445a.41.41 0 0 0-.585 0l-1.97 1.992a.41.41 0 0 0 0 .586l5.813 5.813a.41.41 0 0 0 .586 0l1.992-1.992a.41.41 0 0 0 0-.586l-.375-.329 1.36-1.359a.477.477 0 0 1 .351-.14h4.172c.563 0 1.102-.235 1.477-.61l5.343-5.344a.41.41 0 0 0 0-.586 3.731 3.731 0 0 0-1.921-1.007V9.75l.609.492c.188.141.445.118.586-.07a.412.412 0 0 0-.07-.586l-6.797-5.46a.392.392 0 0 0-.516 0c-.234.187-5.531 4.452-5.531 4.452L11.03 9.61a.413.413 0 0 0-.07.585c.14.188.398.211.586.07l.61-.491v4.593c-.329.07-.61.211-.845.446Zm0 10.148-5.227-5.226 1.406-1.407 5.227 5.227-1.406 1.406Zm1.664-15.867 5.109-4.125 5.11 4.125v4.734a3.684 3.684 0 0 0-2.415 1.055l-1.312 1.313c-.024-1.055-.89-1.876-1.946-1.876h-4.546V9.095Zm-.493 6.07h5.063c.61 0 1.125.492 1.125 1.102 0 .586-.516 1.125-1.172 1.125h-3.164a.42.42 0 0 0-.422.422.42.42 0 0 0 .422.422h4.125a.388.388 0 0 0 .281-.118l2.602-2.601a2.817 2.817 0 0 1 3.68-.258L20.03 20.25a1.294 1.294 0 0 1-.914.375h-4.172c-.351 0-.68.14-.914.375l-1.36 1.36-3.866-3.868 3.093-3.093c.141-.164.352-.235.586-.235Z"
          />
          <path
            fill="currentColor"
            d="M18.924 12.018a1.288 1.288 0 0 0 0-1.805 1.287 1.287 0 0 0-1.805 0 1.287 1.287 0 0 0 0 1.805 1.287 1.287 0 0 0 1.805 0Zm-1.36-.915a.47.47 0 0 1 .47-.468.47.47 0 0 1 .468.469c0 .257-.211.445-.469.445a.437.437 0 0 1-.469-.445Z"
          />
        </svg>
      ),
      content: null,
    },
  ];

  if (data.statusVermin === 1) {
    currentStep = "verifikasi-admin";
  }
  if (data.statusVermin === 1 && data.statusVertek === 1) {
    currentStep = "verifikasi-teknis";
  }
  if (
    data.statusVermin === 1 &&
    data.statusVertek === 1 &&
    data.statusPenetapan === 1
  ) {
    currentStep = "penetapan";
  }
  if (
    data?.statusPembangunan !== undefined &&
    data.statusPembangunan !== null
  ) {
    currentStep = "pelaksanaan-pembangunan";
  }
  if (data?.statusSerahTerima !== null) {
    currentStep = "serah-terima";
  }

  function getStepStatus(currentStep, index) {
    const indexCurrentStep = steps.findIndex((step) => step.id === currentStep);
    return {
      finish: indexCurrentStep >= index,
      wait: indexCurrentStep < index,
    };
  }
  return (
    <div className="steps-container">
      <div className="steps-wrapper">
        {steps.map((step, index) => {
          const status = getStepStatus(currentStep, index);
          return (
            <div
              key={step.id}
              className={classnames("step-item", {
                "step-finish": status.finish,
                "step-wait": status.wait,
              })}
            >
              <div className="step-item-content">
                <div className="step-item-icon">
                  {step.icon}
                  {steps.length - 1 === index ? null : (
                    <div className="step-item-tail"></div>
                  )}
                </div>
                <span className="step-item-title">{step.title}</span>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
};

export default UsulanProgress;
